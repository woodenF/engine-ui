{"version":3,"file":"with-install.js","sources":["../../../../packages/utils/with-install.ts"],"sourcesContent":["import type { App, Plugin } from \"vue\"; // 只是导入类型不是导入App的值\r\n\r\n/**\r\n * 组件外部使用use时执行install，然后将组件注册为全局\r\n */\r\n\r\n// 类型必须导出否则生成不了.d.ts文件\r\nexport type SFCWithInstall<T> = T & Plugin;\r\n\r\n /**\r\n  * 定义一个withInstall方法处理以下组件类型问题\r\n  * @param comp \r\n  */\r\nexport const withInstall = <T>(comp: T) => {\r\n   /**\r\n    * 直接写comp.install = function(){} 的话会报错，因为comp下没有install方法\r\n    * 所以从vue中引入Plugin类型，断言comp的类型为T&Plugin\r\n    */\r\n   (comp as SFCWithInstall<T>).install = (app: App) => {\r\n     app.component((comp as any).name, comp as any);\r\n   };\r\n   return comp as SFCWithInstall<T>;\r\n };"],"names":[],"mappings":";;;;AAaa,MAAA,WAAA,GAAc,CAAI,IAAY,KAAA;AAKxC,EAAC,IAAA,CAA2B,OAAU,GAAA,CAAC,GAAa,KAAA;AAClD,IAAI,GAAA,CAAA,SAAA,CAAW,IAAa,CAAA,IAAA,EAAM,IAAW,CAAA,CAAA;AAAA,GAC/C,CAAA;AACA,EAAO,OAAA,IAAA,CAAA;AACT;;;;"}